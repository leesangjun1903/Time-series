# Revisiting Time Series Outlier Detection: Definitions and Benchmarks

### 1. 핵심 주장과 주요 기여

이 논문은 시계열 이상치 탐지(Time Series Outlier Detection) 분야에서 벤치마킹 방법론의 근본적인 문제를 제기하고 해결책을 제시합니다. 저자들은 기존의 이상치 정의가 모호하고, 합성 데이터 생성 기준이 통일되어 있지 않아 알고리즘 성능을 공정하게 비교하기 어렵다는 점을 지적합니다.[1]

**주요 기여는 다음과 같습니다:**

**행동 기반 분류체계(Behavior-Driven Taxonomy)** 제안: 기존의 point, contextual, collective 이상치 분류를 개선하여, 명확한 맥락 정의를 가진 point-wise와 pattern-wise 이상치로 재분류했습니다. Pattern-wise 이상치는 다시 shapelet, seasonal, trend 이상치로 세분화됩니다.[1]

**통합 합성 기준(General Synthetic Criterion)** 개발: 새로운 분류체계를 기반으로 35개의 합성 데이터셋(20개 단변량, 15개 다변량)을 생성했습니다. 이를 통해 각 이상치 유형을 독립적으로 평가할 수 있게 되었습니다.[1]

**포괄적 벤치마킹**: 4개의 실제 다변량 데이터셋과 9개의 알고리즘(예측 기반, 다수 모델링, 불일치 분석)을 벤치마킹하여, 놀랍게도 고전적 알고리즘이 최신 딥러닝 방법보다 우수한 성능을 보임을 입증했습니다.[1]

**재현 가능한 연구 플랫폼**: 모든 데이터셋, 전처리 스크립트, 알고리즘 구현을 TODS 프로젝트에 공개하여 연구 커뮤니티의 발전을 촉진했습니다.[1]

### 2. 문제 정의, 제안 방법, 모델 구조, 성능 및 한계

#### 해결하고자 하는 문제

기존 시계열 이상치 탐지 연구는 다음과 같은 한계를 가지고 있습니다:[1]

**모호한 이상치 정의**: 기존의 contextual 및 collective 이상치 정의는 "맥락(context)"이 명확하지 않아 실제 적용이 어렵습니다. 예를 들어, shapelet, seasonal, trend 이상치가 모두 collective 이상치로 분류되지만, 각각의 행동은 완전히 다릅니다.[1]

**통일되지 않은 합성 방법**: 각 응용 분야(전력 부하 모니터링, 서버 침입 탐지, ECG 모니터링 등)마다 다른 합성 방법을 사용하여, 알고리즘을 공정하게 비교할 수 없습니다.[1]

**실제 데이터의 라벨링 문제**: 실제 데이터셋은 여러 유형의 이상치가 혼재되어 있고, 라벨링에 오류가 있을 수 있어 알고리즘의 강점과 약점을 명확히 파악하기 어렵습니다.[1]

#### 제안하는 방법 (수식 포함)

논문은 **구조적 시계열 모델(Structural Time Series Model)**을 기반으로 새로운 이상치 정의를 제시합니다.[1]

**시계열 데이터 표현**

경험적 관찰(empirical observation)과 스펙트럼 분석(spectral analysis)을 결합하여 시계열 데이터를 다음과 같이 표현합니다:[1]

$$X = \Psi(2\pi\omega T) + \Theta(T)$$

여기서:
- $$\Psi(2\pi T, \omega)$$: 기본 shapelet 함수 (예: $$\sum_n A\sin(2\pi\omega_n T) + B\cos(2\pi\omega_n T)$$)
- $$\omega = (\omega_1, \omega_2, ..., \omega_n)$$: 계절성(seasonality) 주파수
- $$\Theta(T)$$: 추세(trend) 함수
- $$T = (1, 2, ..., t)$$: 타임스탬프

**Point-wise 이상치 정의**

이상치는 기본적으로 다음 조건을 만족합니다:[1]

$$|x_t - \hat{x}_t| > \epsilon$$

여기서 $$\hat{x}_t$$는 예상값입니다.

1. **Global Outlier**: 전체 데이터에서 크게 벗어나는 점[1]
   $$\epsilon = \alpha \cdot \sigma_X$$
   여기서 $$\sigma_X$$는 시계열의 표준편차, $$\alpha$$는 범위를 조절하는 매개변수입니다.

2. **Contextual Outlier**: 주변 맥락에서 벗어나는 점[1]

$$\epsilon = \beta \cdot \sigma_{X_{t-k,t+k}}$$
   
   여기서 $$X_{t-k,t+k} = (x_{t-k}, x_{t-k+1}, ..., x_{t+k})$$는 윈도우 크기 $$k$$를 가진 맥락, $$\beta$$는 임계값 매개변수입니다.

**Pattern-wise 이상치 정의**

부분 시계열 $$X_{i,j}$$는 다음과 같이 표현됩니다:[1]

$$X_{i,j} = \Psi(2\pi\omega T_{i,j}) + \Theta(T_{i,j})$$

1. **Shapelet Outlier**: 기본 shapelet이 다른 경우[1]
   $$s(\Psi, \hat{\Psi}) > \tau$$
   여기서 $$s$$는 불일치 함수(예: Dynamic Time Warping), $$\hat{\Psi}$$는 정상 shapelet, $$\tau$$는 임계값입니다.

2. **Seasonal Outlier**: 계절성이 비정상적인 경우[1]
   $$s(\omega, \hat{\omega}) > \tau$$
   여기서 $$\hat{\omega}$$는 예상 계절성입니다.

3. **Trend Outlier**: 추세가 급격히 변하는 경우[1]
   $$s(\Theta, \hat{\Theta}) > \tau$$
   여기서 $$\hat{\Theta}$$는 정상 추세입니다.

**합성 방법**

각 이상치 유형에 대한 합성 방법은 다음과 같습니다:[1]

- **Global Outlier**: $$x_t = \bar{X} + \alpha \cdot \sigma_X$$
- **Contextual Outlier**: $$x_t = \bar{X}\_{t-k,t+k} + \beta \cdot \sigma_{X_{t-k,t+k}}$$
- **Shapelet Outlier**: $$X_{i,j} = \Psi'(2\pi\omega T_{i,j}) + \Theta(T_{i,j})$$ (다른 shapelet $$\Psi'$$ 사용)
- **Seasonal Outlier**: $$X_{i,j} = \Psi(2\pi\omega' T_{i,j}) + \Theta(T_{i,j})$$ (다른 계절성 $$\omega'$$ 사용)
- **Trend Outlier**: $$X_{i,j} = \Psi(2\pi\omega T_{i,j}) + \Theta'(T_{i,j})$$ (다른 추세 $$\Theta'$$ 사용)

#### 모델 구조

논문은 새로운 모델을 제안하는 것이 아니라, **9개의 기존 알고리즘을 벤치마킹**합니다:[1]

**예측 편차(Prediction Deviation) 기반**:
- Autoregression (AR): 선형 자기회귀 모델
- Gradient Boosting Regression Tree (GBRT): 윈도우 기반 회귀
- LSTM-RNN: 비선형 시간적 상관관계 모델링

**다수 모델링(Majority Modeling) 기반**:
- One-Class SVM (OCSVM): 초평면으로 정상 데이터와 이상치 분리
- Isolation Forest (IForest): 이진 트리 앙상블로 데이터 포인트 격리
- Autoencoder (AE): 저차원 잠재 공간으로 재구성
- Generative Adversarial Network (GAN): 생성자와 판별자의 min-max 최적화

**불일치 분석(Discords Analysis) 기반**:
- Subsequence Clustering with OCSVM (NOCSVM) 및 IForest (NIForest)
- Matrix Profile (MP): 부분 시계열 간 최소 거리 프로파일 구성

#### 성능 향상

**합성 데이터셋 결과**:[1]

- **고전 알고리즘의 우수성**: AR, OCSVM, IForest가 대부분의 합성 데이터셋에서 딥러닝 방법(LSTM-RNN, GAN)보다 우수한 성능을 보였습니다.
  - AR: Contextual 및 Shapelet 이상치 탐지에서 최고 성능
  - OCSVM/IForest: Global 이상치 및 다변량 다중 이상치 탐지에서 최고 성능
  - Discord 분석 알고리즘: Seasonal 및 Trend 이상치에서 최고 성능

- **Contextual 이상치의 어려움**: 대부분의 알고리즘이 어려움을 겪었지만, AR만 우수한 성능을 보였습니다. 이는 AR이 맥락 윈도우 내에서 자기회귀를 수행하여 정상성을 모델링하기 때문입니다.[1]

- **예측 기반 알고리즘의 다재다능성**: Point-wise 이상치 탐지를 위해 설계된 예측 기반 알고리즘이 일부 Pattern-wise 이상치(특히 Shapelet 이상치)도 탐지할 수 있었습니다.[1]

- **딥러닝의 한계**: LSTM-RNN과 GAN의 평균 F1 점수는 이상치 유형이 증가할수록 감소했습니다. 이는 복잡하고 다양한 이상치 패턴을 처리하는 능력이 제한적임을 시사합니다.[1]

**실제 데이터셋 결과**:[1]

4개의 실제 데이터셋(신용카드 사기, IoT 음용수 모니터링, 서버 공격, 우주 날씨)에서:

- **고전 알고리즘의 지배력**: AR, IForest, OCSVM이 대부분의 데이터셋에서 최고 성능을 보였습니다.
- **GAN의 실패**: GAN은 4개의 실제 데이터셋 모두에서 이상치를 전혀 탐지하지 못했습니다. 이는 실제 데이터의 복잡하고 다양한 패턴을 처리할 수 없음을 보여줍니다.[1]
- **NOCSVM의 취약성**: Subsequence clustering과 OCSVM을 결합한 방법은 실제 데이터에서 매우 낮은 성능을 보였습니다. 모든 정상 부분 시계열을 하나의 클러스터로 매핑하는 가정이 실제 데이터에서는 성립하지 않기 때문입니다.[1]

#### 한계

**Matrix Profile의 국소 정규화 문제**: Matrix Profile은 국소 z-정규화를 사용하는데, 윈도우 크기가 이상치 범위보다 작으면 Trend 이상치 탐지 성능이 저하됩니다. 정규화 후 추세 이동이 이웃 포인트로 전달되어 진짜 Trend 이상치를 식별하기 어렵게 만듭니다.[1]

**딥러닝의 제한된 이상치 처리 능력**: LSTM-RNN과 GAN은 제한된 유형의 이상치만 처리할 수 있으며, 여러 유형의 이상치가 혼재된 데이터셋에서 성능이 급격히 저하됩니다.[1]

**OCSVM 기반 Subsequence Clustering의 비효율성**: NOCSVM은 실제 데이터에서 vanilla OCSVM보다 10배 이상 긴 훈련 시간이 소요되며, 성능도 매우 낮습니다.[1]

**실제 데이터의 복잡성**: 실제 데이터셋은 여러 유형의 이상치가 혼재되어 있고, 라벨링에 오류가 있을 수 있어 알고리즘의 정확한 성능 평가가 어렵습니다.[1]

### 3. 모델의 일반화 성능 향상 가능성

#### 명확한 이상치 정의를 통한 일반화

논문의 행동 기반 분류체계는 **명확한 맥락 정의**를 제공하여, 다양한 도메인에 일반화될 수 있는 기반을 마련합니다. 기존의 모호한 collective 이상치 정의 대신, shapelet, seasonal, trend 이상치로 세분화함으로써, 알고리즘이 특정 유형의 이상치를 학습하고 다른 도메인에서도 유사한 패턴을 탐지할 수 있게 됩니다.[1]

#### 합성 데이터를 통한 체계적 평가

35개의 합성 데이터셋은 **각 이상치 유형을 독립적으로 평가**할 수 있게 하여, 알고리즘의 강점과 약점을 명확히 파악할 수 있습니다. 이를 통해:[1]

- **알고리즘 선택**: 특정 응용 분야에서 어떤 유형의 이상치가 주로 발생하는지 파악하고, 해당 유형에 강한 알고리즘을 선택할 수 있습니다.
- **모델 개선**: 알고리즘이 취약한 이상치 유형을 식별하고, 이를 개선하기 위한 방향을 제시합니다.

#### 고전 알고리즘의 재조명

놀랍게도, 고전적 알고리즘(AR, IForest, OCSVM)이 최신 딥러닝 방법보다 우수한 성능을 보였습니다. 이는 다음을 시사합니다:[1]

- **단순성의 강점**: 고전 알고리즘은 과적합 위험이 적고, 다양한 데이터 분포에 더 강건할 수 있습니다.
- **도메인 독립성**: 딥러닝 방법은 특정 데이터 패턴에 과도하게 맞춰질 수 있지만, 고전 알고리즘은 더 일반적인 통계적 원리에 기반하여 다양한 도메인에 적용될 수 있습니다.

#### 예측 기반 알고리즘의 다재다능성

예측 기반 알고리즘(특히 AR)이 Point-wise 이상치뿐만 아니라 일부 Pattern-wise 이상치(Shapelet 이상치)도 탐지할 수 있다는 발견은 **일반화 가능성**을 높입니다. Shapelet 이상치의 특이한 부분(예: square wave의 직각 부분)을 contextual 이상치로 간주하여 탐지할 수 있기 때문입니다. 이는 알고리즘이 설계된 목적 외에도 다른 유형의 이상치를 탐지할 수 있는 잠재력을 보여줍니다.[1]

#### 다변량 데이터에서의 성능

15개의 다변량 합성 데이터셋을 통해, 여러 유형의 이상치가 혼재된 상황에서도 알고리즘 성능을 평가했습니다. OCSVM과 IForest는 다변량 환경에서도 우수한 성능을 유지했으며, 이는 복잡한 실제 환경에서의 **일반화 능력**을 입증합니다.[1]

#### 한계와 개선 방향

딥러닝 방법(LSTM-RNN, GAN)은 이상치 유형이 증가할수록 성능이 저하되어, **일반화 능력에 한계**가 있습니다. 특히 GAN은 실제 데이터에서 전혀 작동하지 않았습니다. 이는 다음을 시사합니다:[1]

- **데이터 증강 필요성**: 딥러닝 모델은 다양한 유형의 이상치를 포함한 대규모 훈련 데이터가 필요할 수 있습니다.
- **아키텍처 개선**: 다양한 패턴을 동시에 학습할 수 있는 더 유연한 아키텍처가 필요합니다.
- **하이브리드 접근**: 고전 알고리즘과 딥러닝을 결합하여, 각각의 강점을 활용하는 방법이 더 나은 일반화 성능을 제공할 수 있습니다.

#### 실제 데이터 재라벨링을 통한 일반화

논문은 제안된 분류체계를 사용하여 **기존 실제 데이터를 재라벨링**할 것을 권장합니다. 모호한 라벨을 명확한 이상치 유형으로 재분류함으로써, 알고리즘이 더 정확하게 학습하고 다른 데이터셋으로 일반화될 수 있는 기반을 마련할 수 있습니다.[1]

### 4. 앞으로의 연구에 미치는 영향과 고려할 점

#### 연구에 미치는 영향

**표준화된 벤치마킹 프레임워크**: 이 논문은 시계열 이상치 탐지 분야에 **통일된 벤치마킹 기준**을 제공합니다. 35개의 합성 데이터셋, 4개의 실제 데이터셋, 그리고 9개의 알고리즘 구현이 공개되어, 향후 연구자들이 동일한 기준으로 새로운 알고리즘을 평가할 수 있게 되었습니다.[1]

**명확한 이상치 정의**: 행동 기반 분류체계는 연구자들이 **더 정확하게 문제를 정의**하고, 특정 이상치 유형에 최적화된 알고리즘을 개발할 수 있는 기반을 제공합니다. 이는 알고리즘 설계의 방향성을 명확히 하고, 성능 비교를 공정하게 만듭니다.[1]

**고전 알고리즘의 재평가**: 딥러닝이 모든 문제에서 최고의 해결책이 아님을 보여줌으로써, 연구자들이 **단순하고 효율적인 방법을 재고**하도록 동기를 부여합니다. 이는 실제 응용에서 계산 비용과 성능 사이의 균형을 고려하는 데 중요한 통찰을 제공합니다.[1]

**오픈소스 기여**: TODS 프로젝트에 모든 자료를 공개함으로써, **재현 가능한 연구**와 빠른 실험 파이프라인을 촉진합니다. 이는 연구 커뮤니티의 협력을 강화하고, 새로운 알고리즘 개발을 가속화할 것입니다.[1]

**실제 응용의 발전**: 명확한 이상치 정의와 알고리즘 성능 특성을 이해함으로써, 산업 현장에서 **더 효과적으로 이상치 탐지 시스템을 구축**할 수 있습니다. 예를 들어, 제조업체는 shapelet 이상치를, 금융 기관은 contextual 이상치를 중점적으로 탐지하는 맞춤형 시스템을 개발할 수 있습니다.[1]

#### 앞으로 연구 시 고려할 점

**더 풍부한 데이터셋 개발**: 논문의 저자들은 향후 **더 많은 데이터셋을 추가**하고, 더 정교한 합성 기준을 개발할 계획입니다. 연구자들은 다음을 고려해야 합니다:[1]
- 더 복잡한 실제 시나리오를 반영하는 합성 데이터 생성
- 노이즈, 결측치, 비정상성 등 실제 데이터의 특성을 포함하는 데이터셋
- 다양한 도메인(의료, 금융, IoT 등)의 특성을 반영하는 데이터셋

**하이브리드 알고리즘 개발**: 고전 알고리즘과 딥러닝의 장점을 결합한 **하이브리드 접근**을 고려해야 합니다. 예를 들어:[1]
- AR과 LSTM을 결합하여 contextual 및 shapelet 이상치를 동시에 탐지
- IForest의 효율성과 딥러닝의 표현 학습 능력을 결합

**다중 유형 이상치 탐지**: 실제 데이터는 여러 유형의 이상치가 혼재되어 있으므로, **다중 유형 이상치를 동시에 탐지**하는 알고리즘 개발이 필요합니다. 딥러닝 방법은 이 문제에서 한계를 보였으므로, 새로운 아키텍처나 학습 전략이 필요합니다.[1]

**설명 가능성(Explainability)**: 이상치가 어떤 유형인지(shapelet, seasonal, trend 등)를 **설명할 수 있는 알고리즘** 개발이 중요합니다. 이는 실제 응용에서 이상치의 원인을 파악하고 적절한 조치를 취하는 데 필수적입니다.

**온라인 및 스트리밍 데이터 탐지**: 논문은 배치 처리 환경을 다루지만, 실제 응용에서는 **실시간 또는 스트리밍 데이터 탐지**가 중요합니다. IForest는 슬라이딩 윈도우를 사용한 스트리밍 탐지에 적용 가능하지만, 다른 알고리즘의 온라인 버전 개발이 필요합니다.

**계산 효율성**: NOCSVM은 vanilla OCSVM보다 10배 이상 긴 훈련 시간이 소요되었습니다. 연구자들은 **성능과 계산 비용 사이의 균형**을 고려해야 하며, 대규모 데이터에 적용 가능한 효율적인 알고리즘을 개발해야 합니다.[1]

**불균형 데이터 처리**: 실제 데이터에서 이상치는 매우 드물게 발생합니다. 논문은 contamination ratio를 0.01~0.25로 설정했지만, 더 극단적인 불균형 상황에서의 알고리즘 성능을 평가하고 개선해야 합니다.[1]

**도메인 적응(Domain Adaptation)**: 한 도메인에서 학습된 알고리즘을 다른 도메인에 적용할 때의 **전이 학습 및 도메인 적응** 기법 개발이 필요합니다. 이는 라벨링된 데이터가 부족한 새로운 응용 분야에 특히 중요합니다.

**재라벨링 및 데이터 품질 개선**: 논문은 실제 데이터의 라벨링 오류 문제를 지적했습니다. 연구자들은 제안된 분류체계를 사용하여 **기존 데이터셋을 재검토하고 재라벨링**하는 작업을 수행해야 합니다. 또한, 새로운 데이터셋을 구축할 때 명확한 라벨링 가이드라인을 따라야 합니다.[1]

**최신 딥러닝 기법 적용**: 논문이 발표된 이후 Transformer, Self-Supervised Learning, Contrastive Learning 등 새로운 딥러닝 기법이 발전했습니다. 이러한 기법을 시계열 이상치 탐지에 적용하고, 제안된 벤치마크에서 평가하는 연구가 필요합니다.

**불확실성 추정**: 이상치 탐지 결과의 **신뢰도를 정량화**하는 방법 개발이 필요합니다. Bayesian 접근이나 앙상블 방법을 통해 예측의 불확실성을 추정하고, 의사결정자에게 추가 정보를 제공할 수 있습니다.

이 논문은 시계열 이상치 탐지 분야에 명확한 방향성과 표준화된 평가 기준을 제공함으로써, 향후 연구의 기반을 마련했습니다. 연구자들은 이를 바탕으로 더 강건하고 일반화 가능한 알고리즘을 개발하고, 다양한 실제 응용에 효과적으로 적용할 수 있을 것입니다.[1]

[1](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/65988149/def24bf3-8118-4448-9e84-fbb13e495da9/127_revisiting_time_series_outlier.pdf)
