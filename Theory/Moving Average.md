# Moving Average
이동평균(Moving Average, MA)은 금융 데이터나 통계에서 시계열 데이터의 소음(Noise)을 제거하고 전체적인 추세(Trend)를 파악하기 위해 사용하는 가장 대표적인 기술적 분석 지표입니다.

## 1. 기본 개념: "평균을 이동시킨다" 
데이터의 흐름을 일정 기간으로 묶어 평균을 낸 뒤, 시간이 지남에 따라 이 기간을 옆으로 옮겨가며 새로운 평균을 계산합니다.  
이를 선으로 이으면 부드러운 곡선 형태가 되어 가격의 변동성을 완만하게 보여줍니다. 

## 2. 주요 유형 (Methodology)
가장 많이 활용되는 두 가지 방식은 계산 가중치에 따라 구분됩니다.  

### 단순 이동평균 (SMA: Simple Moving Average):
가장 기본적인 방식입니다. 정해진 기간(n) 동안의 값을 모두 더해 n으로 나눕니다. 모든 데이터에 동일한 가중치를 부여합니다.  
- 장점: 계산이 명확하고 객관적입니다.
- 단점: 과거 데이터와 최신 데이터가 동일하게 취급되어, 최근의 급격한 변화를 반영하는 속도가 느립니다(후행성).

가장 직관적인 방식으로, 특정 기간 동안의 값을 산술 평균한 것입니다.

$$\(SMA=\frac{P_{1}+P_{2}+\dots +P_{n}}{n}=\frac{\sum_{i=1}^{n}P_{i}}{n}\)$$

- $\(P\)$ : 가격 (일반적으로 종가)
- $\(n\)$ : 설정한 기간 (예: 5일, 20일 등) 

#### [전문적 해석]
- 균등 가중치: 20일 SMA의 경우, 20일 전의 가격과 오늘 가격에 동일한 5%의 비중을 둡니다.
- 후행성(Lagging): 과거 데이터가 동일하게 반영되므로 현재의 급격한 가격 변동을 즉각적으로 반영하지 못하고 뒤늦게 따라가는 경향이 있습니다.

### 지수 이동평균 (EMA: Exponential Moving Average):
최근 데이터에 더 높은 가중치를 부여하여 계산합니다.
- 장점: 최근 가격 변동에 더 민감하게 반응하여 추세 전환을 빠르게 포착할 수 있습니다. 전문가와 단기 트레이더들이 선호합니다.
- 단점: 잦은 가짜 신호(Whipsaw) 발생 가능성이 존재합니다.

최근 데이터에 더 큰 가중치를 부여하여, SMA의 단점인 '후행성'을 보완한 방식입니다. 실전 트레이딩에서 가장 많이 사용됩니다.

EMA는 재귀적인(Recursive) 구조를 가집니다. 오늘 가격에 가중치를 곱하고, 나머지를 어제의 EMA 값으로 채웁니다. 

$$\(EMA_{today}=[P_{today}\times \alpha ]+[EMA_{yesterday}\times (1-\alpha )]\)$$

여기서 $\(\alpha \)$ (평활 계수, Smoothing Constant)는 다음과 같이 계산됩니다: $\(\alpha =\frac{2}{n+1}\)$

- $\(n\)$ : 기간
- $\(P_{today}\)$ : 오늘의 종가
- $\(EMA_{yesterday}\)$ : 어제의 EMA 값

#### [전문적 해석]
- 최근성 강조: 최근 가격 변동에 민감하게 반응하므로 추세 전환을 SMA보다 훨씬 빠르게 포착합니다.
- 모든 데이터 반영: 수식 구조상 아주 오래전의 데이터도 미세하게나마 계산에 포함되어 있어 데이터의 연속성이 뛰어납니다.

## 3. 실전 분석 및 활용 전략(주식 적용 예시)
전문가들은 이동평균선을 통해 크게 세 가지 정보를 얻습니다.

### 추세 판단 (Trend Identification):
이동평균선이 우상향하면 상승 추세, 우하향하면 하락 추세로 봅니다.  
현재 가격이 이동평균선 위에 있다면 강세장으로 해석합니다.  

### 지지와 저항 (Support & Resistance):
상승장에서는 가격이 하락하다가도 특정 이동평균선(예: 20일선, 60일선) 근처에서 다시 반등하는 '지지' 역할을 합니다. 반대로 하락장에서는 반등 시 이동평균선에 부딪혀 다시 떨어지는 '저항' 역할을 합니다.

### 골든크로스 & 데드크로스 (Crossover):
- 골든크로스: 단기 이동평균선이 장기 이동평균선을 아래에서 위로 뚫고 올라갈 때 (강력한 매수 신호).
- 데드크로스: 단기 이동평균선이 장기 이동평균선을 위에서 아래로 뚫고 내려갈 때 (강력한 매도 신호).

<details>

### 구체적인 예시

#### 1. 시나리오 설정 대상: 
- A 기업의 5일간 종가 데이터
- 기간 $(\(n\))$ : 3일 이동평균 계산데이터:
- 1일차: 10,000원
- 2일차: 11,000원
- 3일차: 12,000원
- 4일차: 15,000원 (갑작스러운 급등 발생) 

#### 단순 이동평균(SMA) 계산 예시
SMA는 단순히 정해진 기간의 합계를 개수로 나눕니다.
- 3일차 SMA: (10,000 + 11,000 + 12,000) / 3 = 11,000원
- 4일차 SMA: (11,000 + 12,000 + 15,000) / 3 = 12,666원
- 해석: 4일차에 가격이 3,000원(25%)이나 급등했음에도 불구하고, SMA는 전일 대비 약 15% 정도만 완만하게 상승했습니다.

#### 지수 이동평균(EMA) 계산 예시 
EMA는 최근 가격에 더 많은 가중치를 둡니다.  
3일 EMA의 가중치 $(\(\alpha \))$ 는 $\(2/(3+1)=0.5\)$ 입니다. (즉, 오늘 가격을 50% 반영) 
- 3일차 EMA: (첫 계산은 보통 SMA와 동일하게 시작) = 11,000원
- 4일차 EMA: $\([15,000(오늘가격)\times 0.5]+[11,000(어제EMA)\times (1-0.5)]\)\(7,500+5,500=\mathbf{13,000원}\)$
- 해석: 같은 급등 상황에서 EMA는 13,000원으로 계산되어, SMA(12,666원)보다 현재의 급등 상황을 더 빠르게 반영하고 있음을 알 수 있습니다.
  
</details>

## 단점 
이동평균(MA) 기법은 태생적으로 "후행성(Lagging)"이라는 치명적인 단점을 안고 있습니다. 현재의 가격 움직임보다 항상 뒤처져서 반응하죠.

## 해결 방법
### 후행성을 줄인 기법: MACD (이동평균 수렴/확산 지수)
MACD (Moving Average Convergence Divergence)는 단순히 하나의 이동평균선만 보는 것이 아니라, 두 개의 EMA 간의 차이를 활용하는 기법입니다.

#### [해결 원리]
단기 EMA(보통 12일)와 장기 EMA(보통 26일)가 서로 가까워지고(수렴) 멀어지는(확산) 정도를 측정합니다. 가격의 변화 속도와 방향성을 동시에 포착하여 후행성을 줄입니다.

다변량 시계열 데이터(Multivariate Time Series)에 MACD(이동평균 수렴·확산 지수)를 적용하는 것은 각 변수의 추세 변화와 변수 간의 동적 관계를 분석하는 강력한 방법입니다.

MACD는 장기 이동평균선과 단기 이동평균선 사이의 관계를 보여주는 추세 추종 모멘텀 지표입니다. 

다변량 시계열 데이터(Multivariate Time Series)에 MACD(이동평균 수렴·확산 지수)를 적용하는 것은 각 변수의 개별적 추세 변화를 포착할 뿐만 아니라, 변수 간의 동적 상호작용을 분석하는 강력한 도구가 됩니다.

#### MACD의 기본 수식과 구성 원리 
MACD는 '가격의 흐름이 평균으로 회귀하거나(수렴), 평균에서 멀어지는(확산)' 성질을 이용합니다.  
특정 변수 $\(x_{i}\)$ 에 대한 수식은 다음과 같습니다. 

##### ① MACD 곡선 (MACD Line) 
단기 지수이동평균(EMA)과 장기 지수이동평균의 차이입니다.

$$\(MACD_{t}=EMA(x_{t},\text{short})-EMA(x_{t},\text{long})\)$$

(통상 short=12일, long=26일 사용)
- 원리: 단기 평균이 장기 평균보다 위에 있으면 상승 추세, 아래에 있으면 하락 추세를 의미합니다.

##### ② 신호선 (Signal Line) 
MACD 곡선의 다시 한번 지수이동평균을 구한 값입니다.

$$\(Signal_{t}=EMA(MACD_{t},n)\)$$

(통상 n=9일 사용)
- 원리: MACD 자체의 노이즈를 제거하여 추세가 확정되는 지점을 보여줍니다.

##### ③ 오실레이터 (Histogram) 
MACD 곡선과 신호선의 간격입니다.

$$\(Histogram_{t}=MACD_{t}-Signal_{t}\)$$

- 원리: 히스토그램이 커지면 추세의 가속도가 붙는 것이고, 작아지면 추세가 둔화됨을 뜻합니다.

### 다변량 시계열에서의 확장 적용 원리
다변량 데이터(예: 온도, 습도, 압력 / 혹은 여러 종목의 주가)에 MACD를 적용할 때는 단순히 개별 변수 분석을 넘어 시스템 전체의 상태를 파악하는 데 중점을 둡니다.

#### (1) Feature Engineering (특성 추출)
다변량 딥러닝 모델(LSTM, Transformer 등)의 입력값으로 원시 데이터(Raw data) 대신 MACD를 넣으면 모델이 추세(Trend)와 모멘텀(Momentum)을 훨씬 쉽게 학습합니다.
- 전문적 이점: 데이터의 스케일이 달라도(예: 전압과 전류), MACD는 '차이'와 '비율'을 다루므로 변수 간의 상대적 변화 강도를 정규화된 관점에서 비교할 수 있습니다.

#### (2) 변수 간 상관관계와 시차(Lag) 분석 
다변량 데이터의 $\(x_{1}\)$ 변수의 MACD와 $\(x_{2}\)$ 변수의 MACD를 비교합니다. 
- 원리: 만약 $\(x_{1}\)$ 의 MACD가 먼저 상승하고 뒤이어 $\(x_{2}\)$ 의 MACD가 상승한다면, $\(x_{1}\)$ 을 $\(x_{2}\)$ 의 선행 지표(Leading Indicator)로 정의할 수 있습니다.
이는 Granger Causality(그랜저 인과관계) 분석의 직관적인 대안이 됩니다. 

#### (3) 다차원 신호 결합 (Ensemble Signal)
여러 변수의 MACD 히스토그램이 동시에 양수(+)로 전환되는 지점을 포착합니다.
- 원리: 다변량 시스템에서 모든 변수가 동시에 수렴에서 확산으로 돌아설 때, 이를 시스템의 '구조적 변화(Structural Break)' 혹은 '강한 추세 전환' 신호로 판단합니다.

##### 실무 적용 시 유의사항
- 지수이동평균(EMA)의 가중치: MACD는 최신 데이터에 가중치를 주는 EMA를 사용하므로, 단순이동평균(SMA)보다 시계열의 급격한 변화에 민감하게 반응합니다.
- 데이터 정규화: 다변량 분석 시 각 변수의 단위가 다르면 MACD 값의 절대 크기도 다릅니다. 따라서 변수 간 비교를 위해서는 MACD를 변수의 표준편차로 나누어 표준화하는 과정이 권장됩니다.

더 구체적인 구현 방법이나 Python 코드가 필요하시다면, 금융 데이터 분석 라이브러리인 Pandas-TA Documentation이나 TA-Lib 공식 가이드를 참고하여 시계열 파이프라인을 구축해 보시기 바랍니다.

### 가짜 신호를 줄인 기법: 볼린저 밴드 (Bollinger Bands)
이동평균선은 횡보장(가격이 박스권에서 움직이는 시장)에서 너무 잦은 가짜 매수/매도 신호를 만듭니다. 볼린저 밴드는 이 문제를 해결합니다.

주식 데이터에서는 그렇고, 다변량 시계열 데이터(Multivariate Time Series)에 볼린저 밴드를 적용하는 것은 각 변수의 '동적 신뢰 구간(Dynamic Confidence Interval)'을 설정하는 과정으로 이해할 수 있습니다.

단일 변수(Univariate)와 달리 다변량 환경에서는 각 변수의 특성에 맞춰 개별적으로 적용하거나, 변수 간 관계를 고려한 차원 축소 후 적용하는 방식을 사용합니다.

#### 작동 원리 및 수식 
볼린저 밴드는 통계학의 이동 표준편차를 기반으로 하며, 특정 시점 $\(t\)$ 에서의 데이터가 과거의 흐름에서 얼마나 벗어나 있는지를 측정합니다. 

#### 기본 수식 
다변량 데이터의 한 변수를 $\(x_{i}\)$ 라고 할 때, 시간 창(Look-back Window) $\(n\)$ 에 대한 계산식은 다음과 같습니다. 

#### 중간 밴드 (MB): $\(n\)$ 일간의 이동평균 (SMA) : 

$$\(\text{MB}\_{t}=\frac{1}{n}\sum_{i=0}^{n-1}x_{t-i}\)$$

볼린저 밴드에서 시간 창(Look-back Window, $\(n\))$ 은 '과거의 데이터 중 얼마만큼을 현재의 기준으로 삼을 것인가'를 결정하는 가장 핵심적인 파라미터입니다.  
2026년 현재 데이터 분석 현장에서도 이 윈도우 설정은 모델의 성패를 가르는 중요한 요소로 다뤄집니다. 

##### 시간 창 $(\(n\))$ 의 통계적 정의 
시간 창은 특정 시점 $\(t\)$ 에서 계산되는 이동평균(Moving Average)과 이동 표준편차(Moving Standard Deviation)의 표본 크기(Sample Size)를 의미합니다. 
- 표본의 대표성: $\(n\)$ 이 클수록 더 많은 과거 데이터를 포함하므로 '장기적인 추세'를 반영하지만, 최근의 급격한 변화에는 둔감해집니다(Smoothing 효과).
- 반응성: $\(n\)$ 이 작을수록 최근 데이터에 민감하게 반응하여 '단기적인 변동'을 즉각 포착하지만, 노이즈(오차)에 의한 가짜 신호(False Positive)가 많아집니다.

#### 표준편차 $(\(\sigma \))$ : $\(n\)$ 의 변화에 따른 밴드의 거동 (수식적 이해) 
볼린저 밴드의 핵심 수식인 $\(\sigma_{t}\)$ (표준편차)는 $\(n\)$ 에 직접적인 영향을 받습니다. 

$$\(\sigma_{t}=\sqrt{\frac{1}{n}\sum_{i=0}^{n-1}(x_{t-i}-\text{MB}_{t})^{2}}\)$$

- $\(n\)$ 이 커질 때: 분모가 커지고 평균이 완만해지므로 밴드 라인이 부드러운 곡선을 그립니다. 데이터가 밴드를 돌파하기가 매우 어려워지며, 이는 아주 강력한 이상치(Outlier)만을 걸러내겠다는 의도입니다.
- $\(n\)$ 이 작아질 때: 밴드가 데이터의 굴곡을 그대로 따라갑니다. 변동성이 조금만 생겨도 밴드 폭이 즉각 넓어지거나 좁아지며, 데이터가 밴드 밖으로 자주 나가는 현상이 발생합니다.

##### 다변량 데이터 특성에 따른 시간 창 설정 전략 
주식은 관습적으로 $\(n=20\)$ 을 쓰지만, 일반 시계열 데이터에서는 데이터의 주기성(Seasonality)을 고려해야 합니다.  
- 초단위 센서 데이터 (High-frequency): 기계의 진동이나 전력량 분석 시에는 매우 짧은 윈도우(예: $\(n=50\sim 100\)$ 밀리초)를 사용하여 미세한 스파이크를 잡아냅니다.
- 일일 비즈니스 지표 (Daily Metrics): 매출이나 접속자 수 분석 시에는 주간 반복 패턴을 반영하기 위해 $\(n=7\)$ (1주일) 혹은 $\(n=28\)$ (4주일) 단위를 주로 사용합니다.
- 장기 경제 지표: 분기별 데이터의 경우 $\(n=4\)$ 또는 $\(n=8\)$ 을 설정하여 연간 흐름 대비 현재의 위치를 파악합니다. 

##### 2026년 분석 트렌드: 적응형 시간 창 (Adaptive Window) 
최근에는 고정된 $\(n\)$ 값을 사용하지 않고, 데이터의 상태에 따라 시간 창을 동적으로 조절하는 기법이 선호됩니다. 
- 가중 이동평균 활용: 단순 이동평균 대신 최신 데이터에 더 높은 가중치를 두는 Pandas EWM(Exponential Weighted Moving)을 사용하여 시간 창의 한계를 보완합니다.
- 최적화 기법: Optuna 같은 하이퍼파라미터 최적화 도구를 사용하여, 과거 데이터에서 이상탐지 성능(F1-Score 등)을 극대화하는 최적의 $\(n\)$ 값을 자동으로 찾아내기도 합니다.

요약하자면, 시간 창은 분석하고자 하는 시계열의 '기저 주기'를 반영해야 합니다.  
데이터에 주간 패턴이 있다면 7의 배수를, 일일 패턴이 뚜렷하다면 해당 주기의 절반 혹은 전체를 윈도우 크기로 설정하는 것이 통계적으로 가장 견고한 전문적 접근입니다.

#### 상/하단 밴드 (UB, LB): 표준편차의 $\(k\)$ 배(통상 2배) 적용

$$\(\text{Upper\ Band}=\text{MB}_{t}+(k\times \sigma _{t})\)$$

$$\(\text{Lower\ Band}=\text{MB}_{t}-(k\times \sigma _{t})\)$$

#### 다변량 데이터에서의 적용 전략
다변량 시계열에서는 단순히 개별 지표에 적용하는 것을 넘어, 데이터의 상호 연관성을 처리하는 것이 핵심입니다.
##### ① 각 지표별 독립적 적용 (Component-wise)
서버 모니터링 시 CPU 점유율, 메모리 사용량 등에 각각 밴드를 설정합니다.
- 원리: 각 변수의 고유한 변동성 주기(Volatility Cycle)를 개별적으로 추적합니다.
- 장점: 구현이 간단하며 특정 변수의 이상 징후를 즉각 파악할 수 있습니다.

##### ② 차원 축소 후 적용 (PCA + Bollinger)
수십 개의 변수가 서로 얽혀 있는 경우, 주성분 분석(PCA)을 통해 데이터를 저차원으로 압축한 뒤 볼린저 밴드를 적용합니다.
- 원리: 여러 변수의 공통된 움직임을 추출한 '주성분(Principal Component)' 시계열에 밴드를 씌웁니다.
- 장점: 개별 변수의 노이즈를 제거하고 시스템 전체의 구조적 변화(Systemic Shift)를 감지하는 데 탁월합니다.

#### 전문적인 해석 도구: %B와 Bandwidth 
다변량 데이터를 수치적으로 비교하기 위해 다음의 지표를 함께 산출합니다. 
- %B (Percent Bandwidth): 현재 값이 밴드 내 어디에 위치하는지 수치화 (0~1 사이면 정상 범위 내). :

```math
\%B=\frac{\text{현재값}-\text{LB}}{\text{UB}-\text{LB}}
```

- Bandwidth (대역폭): 밴드의 폭 자체를 측정하여 시스템의 '불확실성'이나 '에너지 응축' 정도를 분석. :

$$\(\text{Bandwidth}=\frac{\text{UB}-\text{LB}}{\text{MB}}\)$$

#### 실제 활용 사례 (비금융 분야)
- 제조 공정 센서 분석: 압력, 온도, 진동 데이터에 적용하여 장비의 마모나 오작동 징후를 포착합니다. 밴드가 좁아졌다가 급격히 넓어지며 상단을 돌파하면 이상 과부하로 판단합니다.
- 웹 트래픽 보안: 평상시 접속 패턴(이동평균)에서 벗어난 트래픽 급증(상단 밴드 돌파)을 감지하여 DDoS 공격 등을 조기에 차단합니다.

구현 팁: Python 환경에서는 Pandas의 rolling 함수를 사용하여 다변량 데이터프레임 전체에 대해 한 번에 볼린저 밴드 계산을 수행할 수 있어 매우 효율적입니다.

### 선행성을 강화한 기법: RSI (상대 강도 지수)
RSI는 아예 이동평균과는 다른 접근 방식을 사용하여 선행성 지표로 분류됩니다.

다변량 시계열 데이터(Multivariate Time Series)에서 RSI의 개념을 적용하는 것은 단일 변수의 가격 변동을 넘어, 여러 변수 간의 관계 속에서 특정 변수나 전체 시스템의 '상대적 에너지'를 측정하는 과정으로 확장됩니다.

#### 개별 변수별 RSI 적용 및 상관관계 분석
가장 일반적인 방법으로, 각 변수(특성)마다 독립적인 RSI를 계산한 후, 이들 간의 상관성이나 리드-랙(Lead-Lag) 관계를 분석합니다.

##### 수식 (변수 $\(i\)$ 에 대한 RSI):

$$\(RSI_{i,t}=100-\left(\frac{100}{1+\frac{EMA(U_{i,t},n)}{EMA(D_{i,t},n)}}\right)\)$$

- $\(U_{i,t}\)$ : $\(t\)$ 시점에서 $\(i\)$ 번째 변수의 상승분
- $\(D_{i,t}\)$ : $\(t\)$ 시점에서 $\(i\)$ 번째 변수의 하락분

- 작동 원리: 다변량 데이터에서 특정 변수가 과열(Overbought)될 때 다른 변수가 어떻게 반응하는지를 추적하여 시스템의 불균형을 포착합니다.

#### 합성 지수(Composite Index) 기반의 다변량 RSI
여러 변수를 하나의 주성분이나 지수로 통합한 뒤 RSI를 산출하는 고급 기법입니다. 이는 시스템 전체의 모멘텀을 측정하는 데 유용합니다.

##### 작동 원리 및 단계: 
- 데이터 표준화 (Standardization): 단위가 다른 다변량 데이터를 평균 0, 표준편차 1로 변환합니다.

$$\(Z_{i,t}=\frac{X_{i,t}-\mu_{i}}{\sigma_{i}}\)$$

- 차원 축소 (PCA 등): 주성분 분석(PCA)을 통해 여러 변수의 변동성을 가장 잘 설명하는 제1주성분 $(\(PC1\))$ 을 추출합니다.

$$\(PC1_{t}=w_{1}Z_{1,t}+w_{2}Z_{2,t}+\dots +w_{m}Z_{m,t}\)$$

- 다변량 RSI 산출: 추출된 $\(PC1\)$ 의 변화량을 바탕으로 RSI 수식을 적용합니다.

$$\(RS_{multi}=\frac{\text{Average\ Gain\ of\ }PC1}{\text{Average\ Loss\ of\ }PC1}\)$$

$$\(MultiRSI=100-\frac{100}{1+RS_{multi}}\)$$

#### 다변량 RSI의 전문적 해석 (Insights)
- 시스템 다이버전스 (Systemic Divergence): 전체 지수(예: 종합주가지수)는 상승하지만, 다변량 RSI(개별 종목들의 RSI 평균 혹은 PCA RSI)가 하락하고 있다면 내부적인 상승 동력이 약화됨을 의미합니다.

- 순환매 포착 (Rotation Analysis): 다변량 데이터 내에서 각 변수의 RSI를 비교하여, 에너지가 과도한 변수에서 저평가된(과매도된) 변수로 자금이나 에너지가 이동하는 흐름을 포착합니다.

- 이상치 탐지 (Anomaly Detection): 일반적인 상관관계에서 벗어나 특정 변수의 RSI만 급격히 튀는 경우, 해당 변수에 특이 사항이 발생했음을 전문적으로 식별할 수 있습니다.

실전 적용 팁 다변량 데이터 분석 시에는 Python의 Pandas 라이브러리를 사용하여 각 컬럼별로 RSI를 일괄 계산하거나, Scikit-learn의 PCA를 결합하여 시스템 전체의 모멘텀 지표를 생성할 수 있습니다.  

## 추가 방안 :
다변량 시계열 데이터(Multivariate Time Series)는 여러 변수가 서로 영향을 주고받으며 시간에 따라 변하는 데이터입니다.  
일반적인 이동평균(MA)은 변수 간의 상관관계(Correlation)를 무시하고 개별 변수의 과거 값에만 의존한다는 치명적인 단점이 있습니다.

#### 통계적 접근: VAR (Vector Autoregression) 
다변량 시계열 분석의 고전이자 가장 강력한 기초 기법입니다.  
- 해결 방식: MA가 단일 변수의 과거값만 본다면, VAR은 모든 변수의 과거값이 모든 변수의 현재값에 미치는 영향을 수식화합니다.
- 수식 구조: $\(Y_{t}=A_{1}Y_{t-1}+\dots +A_{p}Y_{t-p}+\epsilon_{t}\)$

여기서 $\(Y_{t}\)$ 는 여러 변수로 이루어진 벡터입니다.  
각 변수가 서로의 예측 인자가 됩니다.
- 장점: 변수 간의 인과관계(Granger Causality)를 파악할 수 있어, 단순히 추세를 따라가는 MA보다 훨씬 정교한 예측이 가능합니다.

#### 딥러닝 접근: LSTM-Attention 및 Transformer
이동평균의 '고정된 윈도우 크기'와 '단순 가중치' 문제를 완전히 극복한 방식입니다.
- 해결 방식:
- LSTM (Long Short-Term Memory): 데이터의 장기 의존성과 단기 의존성을 구분하여 학습합니다.
- Attention Mechanism: 다변량 데이터 중 현재 시점에서 가장 중요한 변수와 과거 시점이 무엇인지에 가중치를 동적으로 부여합니다.
- 장점: 비선형적인 관계를 학습할 수 있으며, 변수가 수십 개에 달하는 복잡한 다변량 환경에서도 뛰어난 성능을 보입니다.

참고: PyTorch나 TensorFlow 라이브러리를 통해 구현된 'Temporal Fusion Transformer(TFT)'가 대표적입니다.

#### 상태 공간 모델: Kalman Filter (칼만 필터)
센서 데이터나 실시간 금융 데이터 처리에 특화된 기법입니다.
- 해결 방식: 시스템의 '상태'를 정의하고, 새로운 데이터가 들어올 때마다 예측값과 측정값의 오차를 이용해 실시간으로 최적의 평균값을 업데이트합니다.
- MA와의 차이점: MA는 과거 데이터를 단순히 평균 내지만, 칼만 필터는 데이터의 노이즈(측정 오차)를 통계적으로 분리하여 실제 신호를 추정합니다.
- 활용: 자율주행차의 경로 예측이나 복잡한 파생상품의 가격 결정 모델에 필수적으로 쓰입니다.

#### 차원 축소 연계: PCA + MA (주성분 분석 결합)
변수가 너무 많아 발생하는 '차원의 저주'를 해결하는 방식입니다.
- 해결 방식: 먼저 PCA(Principal Component Analysis)를 통해 수많은 변수를 핵심적인 소수의 주성분으로 압축한 뒤, 그 주성분에 이동평균이나 추세 분석을 적용합니다.
- 장점: 다변량 데이터 사이의 중복된 정보를 제거하여 계산 효율성을 높이고, 핵심적인 흐름(Common Trend)을 더 명확하게 포착합니다.

- 변동성 간의 인과관계가 중요하다면: VAR 모델을 추천합니다.
- 실시간으로 노이즈를 제거하며 추적해야 한다면: Kalman Filter가 적합합니다.
- 복잡한 패턴과 대량의 데이터를 다룬다면: Transformer 기반 시계열 모델이 2026년 기준 가장 강력한 해결책입니다.

다변량 데이터 분석에서는 단순히 평균을 내는 것을 넘어, "변수 간의 상호작용"을 어떻게 모델링 하느냐가 성공의 핵심입니다.
